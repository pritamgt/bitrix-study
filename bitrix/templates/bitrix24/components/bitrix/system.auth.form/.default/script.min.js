BX.namespace("BX.Intranet.SystemAuthForm");BX.Intranet.SystemAuthForm={licenseHandler:function(t){if(typeof t!=="object")return;var e=t.COUNTER_URL||"",o=t.LICENSE_PATH||"",n=t.HOST||"";BX.ajax.post(e,{action:"upgradeButton",host:n},BX.proxy(function(){document.location.href=o},this))},showUserInfoSpotLight:function(t){var e=BX("user-block");var o=BX("user-name")?BX("user-name"):e;var n=new BX.SpotLight({targetElement:o,targetVertex:"middle-center",left:4,lightMode:true,events:{onTargetEnter:function(){n.close();var e=new BX.PopupWindow("menu-custom-preset-delete-popup",o,{closeIcon:true,contentColor:"white",angle:true,width:300,offsetTop:15,content:BX("userSpotLightForm"),buttons:[button=new BX.PopupWindowButton({text:BX.message("AUTH_SAVE_BUTTON"),className:"popup-window-button-create",events:{click:BX.proxy(function(){BX.addClass(button.buttonNode,"popup-window-button-wait");var e={firstName:BX("spotlightFirstName").value,lastName:BX("spotlightLastName").value,photo:BX.type.isDomNode(document.forms["userSpotLightForm"].elements["spotlightPhotoId"])?document.forms["userSpotLightForm"].elements["spotlightPhotoId"].value:""};BX.ajax({method:"POST",dataType:"json",url:t,data:{sessid:BX.bitrix_sessid(),action:"saveUserData",data:e},onsuccess:BX.proxy(function(t){document.location.reload()},this),onfailure:function(){}})},this)}})],events:{onPopupClose:BX.proxy(function(){BX.ajax({method:"POST",dataType:"json",url:t,data:{sessid:BX.bitrix_sessid(),action:"delayUserSpotLight"},onsuccess:BX.proxy(function(){},this),onfailure:function(){}})},this)}});e.show()}}});n.show()}};