"use strict";BX.namespace("Tasks.Component");(function(){if(typeof BX.Tasks.Component.TasksTaskTemplate!="undefined"){return}BX.Tasks.Component.TasksTaskTemplate=BX.Tasks.Component.extend({sys:{code:"task-template-view"},methods:{construct:function(){this.callConstruct(BX.Tasks.Component);this.initFileView()},bindEvents:function(){BX.Tasks.Util.Dispatcher.bindEvent(this.id()+"-buttons","button-click",this.onButtonClick.bind(this));if(this.option("can").edit){BX.addCustomEvent("onTaskTagSelect",BX.proxy(this.syncTags,this));this.bindControl("importance-switch","click",BX.Tasks.passCtx(this.onImportantButtonClick,this))}BX.addCustomEvent("TaskAjaxError",function(t){BX.Tasks.alert(t).then(function(){BX.reload()})})},onImportantButtonClick:function(t){var i=this.option("data").PRIORITY;var n=i==2?1:2;this.callRemote("task.template.update",{id:this.option("data").ID,data:{PRIORITY:n}}).then(function(i){if(i.isSuccess()){this.option("can").PRIORITY=n;BX.toggleClass(t,"no")}}.bind(this))},syncTags:function(t){t=t||[];if(t.length){var i=[];BX.Tasks.each(t,function(t){i.push({NAME:t.name})});t=i}this.callRemote("task.template.update",{id:this.option("data").ID,data:{SE_TAG:t}})},onButtonClick:function(t){if(t=="DELETE"){BX.Tasks.confirmDelete(BX.message("TASKS_TTTV_TEMPLATE_LCF")).then(function(){return this.callRemote("task.template.delete",{id:this.option("data").ID})}.bind(this)).then(function(t){if(t.isSuccess()){window.location=this.option("backUrl")}}.bind(this))}},initFileView:function(){if(!this.option("publicMode")){BX.Tasks.each(this.controlAll("file-area"),function(t){top.BX.viewElementBind(t,{},function(t){return BX.type.isElementNode(t)&&(t.getAttribute("data-bx-viewer")||t.getAttribute("data-bx-image"))})})}}}})}).call(this);
//# sourceMappingURL=logic.map.js